
---
### 内存空间
- 栈数据结构

JavaScript中并没有严格意义上区分栈内存与堆内存。

一般情况是基础数据类型，在栈内存中维护，引用数据类型，在堆内存中维护，栈内存和堆内存没有本质差别，但是栈内存是从地址高位开始分配，堆内存从地址低位开始分配，要结合函数调用栈来一起理解。
> 栈空间先进后出，后进先出。

- 堆数据结构

堆数据结构是一种树状结构。它的存取数据的方式，则与书架与书非常相似。

- 队列
> 先进先出。

- 引用数据类型与堆内存

JS的引用数据类型，比如数组Array，它们值的大小是不固定的。引用数据类型的值是保存在堆内存中的对象。
> JavaScript不允许直接访问堆内存中的数据，因此我们不能直接操作对象的堆内存空间。在操作对象时，实际上是在操作对象的引用而不是实际的对象。因此，引用类型的值都是按引用访问的。这里的引用，我们可以理解为保存在变量对象中的一个地址，该地址与堆内存的实际值相关联。

```
var a1 = 0;   // 变量对象
var a2 = 'this is string'; // 变量对象
var a3 = null; // 变量对象

var b = { m: 20 }; // 变量b存在于变量对象中，{m: 20} 作为对象存在于堆内存中
var c = [1, 2, 3]; // 变量c存在于变量对象中，[1, 2, 3] 作为对象存在于堆内存中
```
变量对象：
| 变量名 | 具体值           |
| ------ | ---------------- |
| a1     | 0                |
| a2     | 'this is string' |
| a3     | null             |
| c      | 引用             |
| b      | 引用             |


面试题：
```
// demo01.js
var a = 20;
var b = a; // 复制了一遍
b = 30;

// 这时a的值是多少? (a=20)

// demo02.js
var m = { a: 10, b: 20 }
var n = m; // 复制了引用
n.a = 15;

// 这时m.a的值是多少? (m.a=15)
```

- 内存空间管理
JavaScript的内存生命周期

> 分配你所需要的内存  
>使用分配到的内存（读、写）  
>不需要时将其释放、归还
```
var a = 20;  // 在内存中给数值变量分配空间
alert(a + 100);  // 使用内存
a = null; // 使用完毕之后，释放内存空间
```